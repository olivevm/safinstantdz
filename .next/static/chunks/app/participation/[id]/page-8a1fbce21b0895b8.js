(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{587:function(e,t,s){Promise.resolve().then(s.bind(s,6928))},4946:function(e,t,s){"use strict";s.d(t,{ts:function(){return r},gC:function(){return i},He:function(){return a},vf:function(){return o}}),s(4590);var l=s(8064),a=(0,l.$)("f31a1a7385ddf296da381ae17bcd09c4f82175f0"),i=(0,l.$)("f1280fcccd33c4f4b7591617e108b08eb23ca3af");(0,l.$)("75fead8a90aae843052f12a716af4e424d898ae2");var n=s(747);let r=async()=>{let e=(0,n.LP)();return(0,n.zq)({headers:(0,n.zl)(e),method:"GET",url:"".concat("https://bakers-backend.shiftin-demo.com","/api/auth/me")})},o=async e=>{let t=(0,n.LP)();return(0,n.zq)({data:{participationId:e},headers:(0,n.zl)(t),method:"POST",url:"".concat("https://bakers-backend.shiftin-demo.com","/api/votes")})}},2320:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var l=s(7437),a=s(2265),i=s(2916);function n(e){var t,s,n,r;let{id:o}=e,[c,d]=(0,a.useState)(!1),u=(0,i.ac)({maxWidth:500}),x=(0,a.useCallback)(async()=>{var e,t;let s=(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.host)+"/participation/"+o;try{await navigator.clipboard.writeText(s),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy the URL",e)}},[o]);return u?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{type:"button",onClick:x,className:"flex flex flex-col items-center justify-between overflow-hidden rounded-2xl border border-solid border-[#707070] bg-white/5 text-wrap",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-4 p-4",children:[(0,l.jsx)("span",{className:"text-heading5 text-[#C2AC6E]",children:"رابط المشاركة"}),(0,l.jsxs)("span",{className:"text-heading5 text-[#CECECE] text-right",children:[" ",(null===(s=window)||void 0===s?void 0:null===(t=s.location)||void 0===t?void 0:t.host)+"/participation/"+o]})]}),(0,l.jsx)("div",{className:"relative h-full w-full items-center justify-center border-r border-solid border-[#707070] bg-[#C2AC6E]/35 p-4 text-nowrap",children:(0,l.jsx)("span",{className:"relative leading-8 text-heading5 text-white",children:"نسخ رابط"})})]}),c&&(0,l.jsx)("div",{className:"absolute right-0 top-full mt-2 p-2 bg-gray-800 text-white text-sm rounded",children:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("div",{className:"bg-white w-5 h-5 rounded-full flex items-center justify-center p-1",children:(0,l.jsx)("img",{src:"/images/checkmark.svg"})}),(0,l.jsx)("span",{className:"text-body-smaller",children:"تم نسخ الرابط إلى الحافظة"})]})})]}):(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{type:"button",onClick:x,className:"flex h-24 flex-row items-center justify-between overflow-hidden rounded-2xl border border-solid border-[#707070] bg-white/5 text-nowrap",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-4 p-4",children:[(0,l.jsx)("span",{className:"text-heading5 text-[#C2AC6E]",children:"رابط المشاركة"}),(0,l.jsxs)("span",{className:"text-heading5 text-[#CECECE] text-right",children:[" ",(null===(r=window)||void 0===r?void 0:null===(n=r.location)||void 0===n?void 0:n.host)+"/participation/"+o]})]}),(0,l.jsx)("div",{className:"relative h-full items-center justify-center border-r border-solid border-[#707070] bg-[#C2AC6E]/35 p-4 text-nowrap",children:(0,l.jsx)("span",{className:"relative top-7 text-heading5 text-white",children:"نسخ رابط"})})]}),c&&(0,l.jsx)("div",{className:"absolute right-0 top-full mt-2 p-2 bg-gray-800 text-white text-sm rounded",children:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("div",{className:"bg-white w-5 h-5 rounded-full flex items-center justify-center p-1",children:(0,l.jsx)("img",{src:"/images/checkmark.svg"})}),(0,l.jsx)("span",{className:"text-body-smaller",children:"تم نسخ الرابط إلى الحافظة"})]})})]})}},6928:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var l=s(7437),a=s(9533),i=s(6463),n=s(2265),r=s(969),o=s(2320),c=s(6094),d=s(8358);function u(e){var t,s,u,x;let{params:h}=e,m=new c.S,{data:g,isLoading:f,refetch:v}=(0,r.EW)(null==h?void 0:h.id),{mutateAsync:p}=(0,r.rv)(),{data:b}=(0,r.xJ)(),{openAuthPopup:j}=(0,d.a)(),w=(0,i.useRouter)(),N=(0,n.useCallback)(()=>w.back(),[w]),y=(0,n.useCallback)(async()=>{if(!(null==b?void 0:b.id))return j();let e=await p(null==g?void 0:g.id);return await m.invalidateQueries({queryKey:["getOne"]}),await v(),e},[null==b?void 0:b.id,null==g?void 0:g.id,j,m,v,p]),k=null==g?void 0:null===(t=g.votes)||void 0===t?void 0:t.find(e=>(null==e?void 0:e.userId)===(null==b?void 0:b.id));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"container relative z-50 flex h-auto w-full items-center justify-center bg-black pt-10 lg:h-screen lg:pt-0 lg:hidden",children:(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex flex-col items-start justify-center gap-0 lg:flex-row lg:gap-10",children:(0,l.jsx)("div",{className:"flex w-full flex-col justify-center gap-3 lg:w-1/2 lg:justify-start lg:gap-8",children:(0,l.jsx)("img",{src:"/images/logo-challenge.svg",className:"mx-auto max-w-[200px] lg:hidden"})})})})}),(0,l.jsxs)("section",{className:"relative flex flex-col pb-0 pt-28",children:[(0,l.jsx)("img",{src:"/images/flour-card3.svg",className:"absolute top-[30%] -right-[20%] h-[700px] overflow-hidden -z-10 hidden rotate-[110deg] lg:block"}),(0,l.jsx)("img",{src:"/images/flour-card3.svg",className:"absolute -bottom-96 -right-1/2 h-[700px] overflow-hidden -z-10 block rotate-[110deg] lg:hidden"}),(0,l.jsx)("div",{className:"container",children:f?(0,l.jsx)("div",{className:"mx-auto h-52 w-52",children:(0,l.jsx)(a.y1,{src:"/images/fetch-animation.json",autoplay:!0,loop:!0})}):(0,l.jsxs)("div",{className:"flex flex-col-reverse lg:flex-row items-start lg:items-center gap-10 lg:gap-0 justify-between",children:[(0,l.jsxs)("div",{className:"flex w-full lg:w-1/3 flex-col gap-5",children:[(0,l.jsxs)("button",{type:"button",onClick:N,className:"flex-row items-center justify-start gap-4 hidden lg:flex",children:[(0,l.jsx)("img",{src:"/images/ico-arrow-down.svg",className:"w-5 -rotate-90"}),(0,l.jsx)("span",{className:"text-heading3",children:" رجوع "})]}),(0,l.jsx)("div",{className:"text-heading3 text-white lg:text-[48px] text-center lg:text-start",children:null==g?void 0:g.fullName}),(0,l.jsxs)("div",{className:"font-secondary flex flex-row items-center gap-3 mx-auto lg:mx-0",children:[(0,l.jsxs)("span",{className:"text-heading2 text-white",children:[" ",null==g?void 0:null===(s=g.votes)||void 0===s?void 0:s.length," "]}),(0,l.jsxs)("span",{className:"text-heading3 -mb-5 text-[#C2AC6E]",children:[" ","(صوت)"," "]})]}),(0,l.jsx)("hr",{className:"mb-5 block h-[1px] w-full text-[#C2AC6E]"}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-8",children:[(0,l.jsx)("div",{className:"relative h-16 w-16 rounded-full bg-[#C2AC6E]",children:(0,l.jsx)("img",{src:"https://bakers-backend.shiftin-demo.com"+(null==g?void 0:null===(u=g.chef)||void 0===u?void 0:u.profilePicture),className:"-mt-4"})}),(0,l.jsxs)("span",{className:"text-heading4 text-white",children:["فريق ",null==g?void 0:null===(x=g.chef)||void 0===x?void 0:x.fullNameAr]})]}),(0,l.jsx)(o.Z,{id:null==g?void 0:g.id}),k?(0,l.jsxs)("button",{type:"button",disabled:!0,className:"btn btn-primary vote-btn group/btn mt-5 cursor-not-allowed gap-3",children:[(0,l.jsx)("img",{src:"/images/ico-heart-filled.svg"}),(0,l.jsx)("span",{children:" تم تصويت "})]}):(0,l.jsxs)("button",{type:"button",className:"btn vote-btn group/btn mt-5 gap-3 max-[768px]:mx-auto",onClick:y,children:[(0,l.jsx)("img",{src:"/images/ico-heart-empty.svg",className:"block group-hover/btn:hidden"}),(0,l.jsx)("img",{src:"/images/ico-heart-filled.svg",className:"hidden group-hover/btn:block"}),(0,l.jsx)("span",{children:" صوت "})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute -top-14",children:(0,l.jsxs)("button",{type:"button",onClick:N,className:"flex flex-row items-center justify-start gap-4 lg:hidden",children:[(0,l.jsx)("img",{src:"/images/ico-arrow-down.svg",className:"w-5 -rotate-90"}),(0,l.jsx)("span",{className:"text-heading3",children:" رجوع "})]})}),(0,l.jsx)("img",{src:"".concat("https://bakers-backend.shiftin-demo.com","/").concat(null==g?void 0:g.participationPicture),className:"h-[100vw] w-[100vw] lg:h-[500px] lg:w-[500px] rounded-[20px] object-cover"}),(0,l.jsx)("img",{src:"/images/vote-card-border.svg",className:"absolute left-0 top-0 -rotate-1 scale-105 w-screen h-[100vw] lg:w-auto lg:h-auto"})]})]})}),(0,l.jsx)("img",{src:"/images/single-flour-left.svg",className:"absolute -top-24 -left-24 -z-10 block lg:hidden"}),(0,l.jsx)("img",{src:"/images/single-flour-left.svg",className:"absolute top-0 rotate-45 left-2/4 -z-10 block lg:hidden"}),(0,l.jsx)("img",{src:"/images/single-flour-left.svg",className:"absolute -top-16 -left-[15%] -z-10 hidden h-[800px] lg:block"})]})]})}},8245:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return n},useAuth:function(){return r}});var l=s(7437),a=s(2265);let i=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,a.useState)(!1);return(0,l.jsx)(i.Provider,{value:{isAuthPopupOpen:s,openAuthPopup:()=>n(!0),closeAuthPopup:()=>n(!1)},children:t})},r=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8358:function(e,t,s){"use strict";s.d(t,{a:function(){return l.useAuth}});var l=s(8245)},969:function(e,t,s){"use strict";s.d(t,{xJ:function(){return n},EW:function(){return i},rv:function(){return o}});var l=s(4946),a=s(932);let i=e=>(0,a.a)({queryKey:["getOne",e],queryFn:()=>(0,l.gC)(e),enabled:!!e});s(9833);let n=()=>(0,a.a)({queryKey:["getCurrentUser"],queryFn:async()=>await (0,l.ts)()});var r=s(5524);let o=()=>(0,r.D)({mutationKey:["voteForParticipation"],mutationFn:e=>(0,l.vf)(e)})},9833:function(e,t,s){"use strict";s.d(t,{J:function(){return i}});var l=s(4946),a=s(932);let i=(e,t,s)=>(0,a.a)({queryKey:["listings",e,s],queryFn:()=>(0,l.He)(e,t,s),enabled:!!e})},747:function(e,t,s){"use strict";s.d(t,{zl:function(){return i.authHeader},zq:function(){return a},LP:function(){return i.getToken},o4:function(){return i.setToken}});let l=s(8472).Z.create({headers:{Accept:"application/json","Content-Type":"application/json"}}),a=(e,t)=>l({...e,...t}).then(e=>e.data);var i=s(6427)},6427:function(e,t,s){"use strict";s.r(t),s.d(t,{authHeader:function(){return i},getToken:function(){return a},setToken:function(){return l}});let l=e=>void 0!==window?localStorage.setItem("token",e):null,a=()=>{if(void 0!==window){let e=localStorage.getItem("token");return console.log({token:e}),e}return null},i=e=>({Authorization:"Bearer ".concat(e)})}},function(e){e.O(0,[149,881,971,23,744],function(){return e(e.s=587)}),_N_E=e.O()}]);